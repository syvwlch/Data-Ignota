---
title: "Exploring Verbosity"
description: |
  A brief look at how many words characters use per line of dialog
author:
  - name: Mathieu Glachant
date: 2022-10-09
output:
  distill::distill_article:
    self_contained: false
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(gt)

PATH_TO_SAID <- "../../data/said.csv"
said <- read.csv(PATH_TO_SAID) %>%
  filter(chapter < 13)
```

Let's define, for now, verbosity as the tendency to use lots of words each time a character communicates with another. What visualizations of this concept can we generate from the chapters edited to date, i.e. the first twelve?

## Overall Verbosity

Verbosity overall in the novels follows a classic _Power Law Distribution_ with a fairly long tail. This is pretty standard for human communications.

```{r verbosity}
said  %>%
  group_by(line) %>%
  summarize(words = mean(words), .groups = "drop") %>%
  ggplot(mapping = aes(x = words)) +
    geom_histogram(binwidth = 5) +
    labs(
      title = "Verbosity Across the Text",
      x = "Number of words per line of dialog",
      y = "Number of lines of dialog",
    )
```

## Verbosity by Language

Our cast of characters is much more verbose in some languages than others, e.g. archaic English, which the reader primarily uses to rant at Mycroft.

```{r verbosity_by_language}
said  %>%
  filter(!is.na(speaker)) %>%
  group_by(line, language) %>%
  summarize(words = mean(words), .groups = "drop") %>%
  ggplot(mapping = aes(
    y = reorder(language, words, FUN = median),
    x = words,
    )
  ) +
    geom_boxplot() +
    coord_cartesian(xlim = c(0, 100)) +
    labs(
      title = "Verbosity by Language",
      x = "Number of words per line of dialog",
      y = NULL,
    )
```

## Verbosity by Character

Let's define a main character as one who speaks or texts at least 25 lines of dialog, and look at a box plot of the number of words they use per line of dialog.

```{r main_characters}
characters <- said %>%
  group_by(speaker) %>%
  summarize(count = n()) %>%
  rename(
    character = speaker, 
    speaks = count,
  ) %>%
  filter(
    !is.na(character),
    speaks > 24,
  )

characters <- characters$character
```

```{r verbosity_by_character}
said  %>%
  filter(speaker %in% characters) %>%
  group_by(line, speaker) %>%
  summarize(words = mean(words), .groups = "drop") %>%
  ggplot(mapping = aes(
    y = reorder(speaker, words, FUN = median),
    x = words
    )
  ) +
    geom_boxplot() +
    coord_cartesian(xlim = c(0, 125)) +
    labs(
      title = "Verbosity by Main Character",
      y = NULL,
      x = "Number of words per line of dialog"
    )
```

Eureka's median word count per line is highest, but Mycroft has some extreme outliers, as high as 350 words for one line of dialog off the right edge of that chart. Who could be on the receiving end of such prolixity?

```{r verbosity_Mycroft}
said  %>%
  filter(
    speaker == "#Mycroft",
    addressee %in% characters | addressee == "#reader",
  ) %>%
  group_by(line, addressee) %>%
  summarize(words = mean(words), .groups = "drop") %>%
  ggplot(mapping = aes(
    y = reorder(addressee, words, FUN = median),
    x = words
    )
  ) +
    geom_boxplot() +
    coord_cartesian(xlim = c(0, 250)) +
    labs(
      title = "Mycroft's Verbosity by Addressee",
      y = NULL,
      x = "Number of words per line of dialog"
    )
```

Ah, of course. Mycroft is much more verbose in his historical & philosophical asides to the reader. By contrast he's almost monosyllabic with the Major. How does Mycroft's verbosity compare to the others if we exclude the reader?

```{r verbosity_wo_reader, preview=TRUE}
said  %>%
  filter(
    speaker %in% characters,
    addressee != "#reader",
  ) %>%
  group_by(line, speaker) %>%
  summarize(words = mean(words), .groups = "drop") %>%
  ggplot(mapping = aes(
    y = reorder(speaker, words, FUN = median),
    x = words
    )
  ) +
    geom_boxplot() +
    coord_cartesian(xlim = c(0, 50)) +
    labs(
      title = "Verbosity by Main Character",
      subtitle = "excluding asides to the reader",
      y = NULL,
      x = "Number of words per line of dialog"
    )
```

Mycroft is still in the top three but without his asides to the reader his verbosity is much more like the others'.
